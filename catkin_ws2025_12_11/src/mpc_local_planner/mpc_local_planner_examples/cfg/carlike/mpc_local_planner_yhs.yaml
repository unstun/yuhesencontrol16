MpcLocalPlannerROS:
  odom_topic: Odometry   # 这里要写你真实的里程计话题名

  robot:
    type: "simple_car"
    simple_car:
      wheelbase: 0.6
      front_wheel_driving: true
      max_vel_x: 1.0
      max_vel_x_backwards: 0.6
      max_steering_angle: 0.6
      acc_lim_x: 0.8
      dec_lim_x: 0.8
      max_steering_rate: 0.8

  footprint_model:
    type: "line"
    line_start: [0.0, 0.0]
    line_end:   [0.6, 0.0]

  collision_avoidance:
    min_obstacle_dist: 0.3
    enable_dynamic_obstacles: false
    force_inclusion_dist: 0.5
    cutoff_dist: 2.0
    include_costmap_obstacles: true
    costmap_obstacles_behind_robot_dist: 1.0

  grid:
    type: "fd_grid"
    grid_size_ref: 25
    dt_ref: 0.2
    xf_fixed: [true, true, true]
    warm_start: true
    collocation_method: "forward_differences"
    cost_integration_method: "left_sum"
    variable_grid:
      enable: true
      min_dt: 0.05
      max_dt: 0.5
      grid_adaptation:
        enable: true
        dt_hyst_ratio: 0.1
        min_grid_size: 10
        max_grid_size: 40

  planning:
    objective:
      type: "quadratic_form"
      quadratic_form:
        state_weights:   [4.0, 4.0, 2.0]    # x, y, yaw
        control_weights: [0.5, 0.2]         # v, steering
        integral_form: false
      minimum_time_via_points:
        position_weight:    0.0
        orientation_weight: 0.0
        via_points_ordered: false

    terminal_cost:
      type: "quadratic"
      quadratic:
        final_state_weights: [6.0, 6.0, 3.0]

    terminal_constraint:
      type: "none"

  controller:
    outer_ocp_iterations: 3
    xy_goal_tolerance: 0.05
    yaw_goal_tolerance: 0.1
    global_plan_overwrite_orientation: true
    global_plan_prune_distance: 1.0
    allow_init_with_backward_motion: true
    max_global_plan_lookahead_dist: 2.0
    global_plan_viapoint_sep: 0.3
    force_reinit_new_goal_dist: 0.5
    force_reinit_new_goal_angular: 1.57
    force_reinit_num_steps: 10
    prefer_x_feedback: false
    publish_ocp_results: false

  solver:
    type: "ipopt"
    ipopt:
      iterations: 50
      max_cpu_time: 0.03
      ipopt_numeric_options:
        tol: 1e-4
      ipopt_string_options:
        linear_solver: "mumps"
        hessian_approximation: "limited-memory"

